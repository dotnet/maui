<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
	xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
	xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" xmlns:local="clr-namespace:Maui.Controls.Sample.CollectionViewGalleries"
	x:Class="Maui.Controls.Sample.CollectionViewGalleries.SelectionGalleries.SingleBoundSelection">

	<ContentPage.Content>
		<StackLayout
			Spacing="5">

			<Label
				Text="The selected item in the CollectionView should match the 'Selected' Label below. If it does not, this test has failed."
				VerticalOptions="CenterAndExpand"
				HorizontalOptions="CenterAndExpand" />

			<Label
				Text="{Binding SelectedItem, StringFormat='{, x:DataType={x:Null}}Selected: {0}'}"
				VerticalOptions="CenterAndExpand"
				HorizontalOptions="CenterAndExpand" />

			<Button
				AutomationId="Reset"
				Text="Reset Selection to Item 0"
				Clicked="ResetClicked" />

			<Button
				AutomationId="Clear"
				Text="Clear Selection"
				Clicked="ClearClicked" />

            <CollectionView
				ItemsSource="{Binding Items, x:DataType={x:Null}}"
				SelectionMode="Single"
				SelectedItem="{Binding SelectedItem, x:DataType={x:Null}}">
                <CollectionView.Resources>
                    <ResourceDictionary>
                        <Style TargetType="Border">
                            <Setter Property="VisualStateManager.VisualStateGroups">
                                <VisualStateGroupList>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal" />
                                        <VisualState x:Name="Selected">
                                            <VisualState.Setters>
                                                <Setter
													Property="BackgroundColor"
													Value="RoyalBlue" />
                                                <Setter
													Property="Scale"
													Value="0.9" />
                                            </VisualState.Setters>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateGroupList>
                            </Setter>
                        </Style>
                    </ResourceDictionary>
                </CollectionView.Resources>
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="local:CollectionViewGalleryTestItem">
                        <Border
							StrokeShape ="RoundRectangle 20,20,20,20"
							Margin="10"
							BackgroundColor="LightBlue" >
                            <StackLayout>
                                <Image
									Source="{Binding Image, x:DataType={x:Null}}"
									HeightRequest="50" />
                                <Label
                                    AutomationId="{Binding Caption, x:DataType={x:Null}}"
									Text="{Binding Caption, x:DataType={x:Null}}" />
                            </StackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </StackLayout>
	</ContentPage.Content>
</ContentPage>