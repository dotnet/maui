<?xml version="1.0" encoding="utf-8" ?>
<controls:TestContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                          xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                          xmlns:controls="clr-namespace:Maui.Controls.Sample.Issues"
                          x:Class="Maui.Controls.Sample.Issues.Issue30426">
    <ScrollView>
        <VerticalStackLayout Padding="20"
                Spacing="15">
            <Label
                AutomationId="WaitForStubControl"
                Text="Issue 30426 - IImage Downsize() throws Exception in 9.0.81 when called from background thread on iOS"
                FontSize="16"
                HorizontalOptions="Center"/>

            <!-- Image display area -->
            <Border
                Stroke="Gray"
                StrokeThickness="1"
                BackgroundColor="LightGray"
                HeightRequest="200"
                WidthRequest="300"
                HorizontalOptions="Center">
                <Image x:Name="DisplayImage"
                       AutomationId="DisplayImage"
                       Aspect="AspectFit"
                        Source="royals.png"/>
            </Border>

            <!-- File info display -->
            <Label x:Name="FileSizeLabel"
                   AutomationId="FileSizeLabel"
                   Text="File Size: Not loaded"
                   FontSize="14"/>

            <Label x:Name="DimensionsLabel"
                   AutomationId="DimensionsLabel"
                   Text="Dimensions: Not loaded"
                   FontSize="14"/>

            <!-- Load Image Button -->
            <Button
                x:Name="LoadImageButton"
                AutomationId="LoadImageButton"
                Text="Load Embedded Image (royals.png)"
                Clicked="OnSelectImageClicked"/>

            <Label Text="Resize Percentage:"
                    FontSize="16"/>
            <Label x:Name="ResizeLabel"
                    Text="50%"/>
            <Slider x:Name="ResizeSlider"
                    AutomationId="ResizeSlider"
                    Minimum="10"
                    Maximum="100"
                    Value="50"
                    ValueChanged="OnResizeSliderChanged"/>

            <Button
                x:Name="ProcessImageButton"
                AutomationId="ProcessImageButton"
                Text="Process Image (IImage.Downsize())"
                Clicked="OnProcessImageClicked"/>

            <!-- Status and results -->
            <Label x:Name="StatusLabel"
                   AutomationId="StatusLabel"
                   Text="Status: Ready"
                   FontSize="14"
                   TextColor="Blue"/>

            <Label x:Name="ErrorLabel"
                   AutomationId="ErrorLabel"
                   Text=""
                   FontSize="14"
                   TextColor="Red"
                   IsVisible="False"/>

        </VerticalStackLayout>
    </ScrollView>
</controls:TestContentPage>