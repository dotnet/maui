<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Maui.Controls.Sample.Issues.SafeAreaAndroidTest"
             x:Name="TestPage"
             Title="SafeArea Android Test">
    
    <Grid x:Name="MainGrid" BackgroundColor="Red" SafeAreaEdges="All" AutomationId="MainGrid">
        <!-- Single content grid that spans the entire screen -->
        <Grid x:Name="ContentGrid" SafeAreaEdges="None" AutomationId="ContentGrid">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            
            <!-- Top test area - should move in/out of status bar area -->
            <Border Grid.Row="0" BackgroundColor="Yellow" Stroke="Orange" StrokeThickness="3" Padding="10" SafeAreaEdges="None">
                <Label Text="TOP AREA: This should move in/out of Android status bar area when safe area is toggled"
                       FontSize="14"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       TextColor="DarkOrange" />
            </Border>
            
            <!-- Middle content area with control panel -->
            <ScrollView Grid.Row="1">
                <StackLayout Spacing="20" Padding="20" VerticalOptions="Center">
                    <Label Text="SafeArea Android Test" 
                           FontSize="24" 
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           TextColor="White" />
                    
                    <Label Text="The red background shows areas outside safe area on Android. Watch the yellow areas at top/bottom move when you toggle MainGrid safe area settings."
                           FontSize="14"
                           HorizontalOptions="Center"
                           TextColor="White" />
                    
                    <Label x:Name="CurrentSettingsLabel"
                           Text="Current MainGrid SafeAreaEdges: All"
                           FontSize="16"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           TextColor="White"
                           AutomationId="CurrentSettings" />
                    
                    <!-- Simple button controls for MainGrid -->
                    <Border BackgroundColor="White" Stroke="Gray" StrokeThickness="2" Padding="20" Margin="10">
                        <VerticalStackLayout Spacing="15">
                            <Label Text="MainGrid Safe Area Control (Android):" 
                                   FontSize="18" 
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center" />
                            
                            <Button Text="Set MainGrid to None (Edge-to-edge)"
                                    Clicked="OnGridSetNoneClicked"
                                    BackgroundColor="LightBlue"
                                    AutomationId="GridResetNoneButton" />
                            
                            <Button Text="Set MainGrid to Container (Respect bars)"
                                    Clicked="OnGridSetContainerClicked"
                                    BackgroundColor="LightGreen"
                                    AutomationId="GridSetContainerButton" />
                            
                            <Button Text="Set MainGrid to All (Full safe area)"
                                    Clicked="OnGridSetAllClicked"
                                    BackgroundColor="LightCoral"
                                    AutomationId="GridResetAllButton" />
                            
                            <!-- Entry for testing SoftInput behavior -->
                            <Entry Placeholder="Focus me to test SoftInput behavior on Android"
                                   BackgroundColor="White"
                                   AutomationId="SoftInputTestEntry" />
                            
                            <!-- Per-edge controls for specific scenarios -->
                            <Label Text="Per-Edge Controls (Android):" 
                                   FontSize="16" 
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   Margin="0,10,0,0" />
                            
                            <Button Text="Set Bottom Edge to SoftInput"
                                    Clicked="OnGridSetBottomSoftInputClicked"
                                    BackgroundColor="LightYellow"
                                    AutomationId="GridSetBottomSoftInputButton" />
                            
                            <Button Text="Set Top Edge to Container"
                                    Clicked="OnGridSetTopContainerClicked"
                                    BackgroundColor="LightPink"
                                    AutomationId="GridSetTopContainerButton" />
                            
                            <Button Text="Set Top Edge to None"
                                    Clicked="OnGridSetTopNoneClicked"
                                    BackgroundColor="LightGray"
                                    AutomationId="GridSetTopNoneButton" />
                            
                            <!-- Android-specific instructions -->
                            <StackLayout Spacing="5" Margin="0,10,0,0">
                                <Label Text="Android-specific Notes:" 
                                       FontSize="12" 
                                       FontAttributes="Bold"
                                       TextColor="Blue"
                                       HorizontalOptions="Center" />
                                <Label Text="• None = Content goes under status/navigation bars" 
                                       FontSize="10" 
                                       TextColor="Blue"
                                       HorizontalOptions="Center" />
                                <Label Text="• Container = Respect status/navigation bars" 
                                       FontSize="10" 
                                       TextColor="Green"
                                       HorizontalOptions="Center" />
                                <Label Text="• All = Respect all safe areas" 
                                       FontSize="10" 
                                       TextColor="Red"
                                       HorizontalOptions="Center" />
                                <Label Text="• SoftInput = Always pad for keyboard" 
                                       FontSize="10" 
                                       TextColor="Orange"
                                       HorizontalOptions="Center" />
                            </StackLayout>
                        </VerticalStackLayout>
                    </Border>
                </StackLayout>
            </ScrollView>
            
            <!-- Bottom test area - should move in/out of navigation bar area -->
            <Border Grid.Row="2" BackgroundColor="Yellow" Stroke="Orange" StrokeThickness="3" Padding="10">
                <Label Text="BOTTOM AREA: This should move in/out of Android navigation bar area when safe area is toggled"
                       FontSize="14"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       TextColor="DarkOrange" />
            </Border>
        </Grid>
    </Grid>
</ContentPage>