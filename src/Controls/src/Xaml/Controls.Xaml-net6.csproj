<Project Sdk="Microsoft.NET.Sdk">
	<PropertyGroup>
		<TargetFrameworks>netstandard2.0;$(MauiPlatforms)</TargetFrameworks>
		<AssemblyName>Microsoft.Maui.Controls.Xaml</AssemblyName>
		<RootNamespace>Microsoft.Maui.Controls.Xaml</RootNamespace>
		<_MauiDesignDllBuild Condition=" '$(OS)' != 'Unix' And '$(MSBuildRuntimeType)' == 'Full'">True</_MauiDesignDllBuild>
		<NoWarn>$(NoWarn);CA2200;NU5128</NoWarn>
		<PackageId>Microsoft.Maui.Controls.Xaml</PackageId>
	</PropertyGroup>

	<PropertyGroup Condition="$(TargetFramework.Contains('-windows')) == true ">
		<NoWarn>$(NoWarn);CA1416</NoWarn>
		<DefineConstants>$(DefineConstants);WINDOWS</DefineConstants>
		<TargetPlatformMinVersion>10.0.17763.0</TargetPlatformMinVersion>
		<RuntimeIdentifiers>win10-x86;win10-x64;win10-arm64</RuntimeIdentifiers>
	</PropertyGroup>

	<ItemGroup>
		<ProjectReference Include="..\Core\Controls.Core-net6.csproj" />
		<PackageReference Include="Microsoft.Extensions.Configuration" />
	</ItemGroup>

	<ItemGroup>
		<Folder Include="Diagnostics\" />
	</ItemGroup>

	<Target Name="Net6WinUIWorkaround" BeforeTargets="_GetSdkToolsPathsFromSdk" Condition="$(TargetFramework.Contains('-windows')) == true ">
		<PropertyGroup>
			<TargetPlatformIdentifierAdjusted>UAP</TargetPlatformIdentifierAdjusted>
		</PropertyGroup>
	</Target>

    <PropertyGroup Condition=" '$(_MauiDesignDllBuild)' == 'True'">
	<TargetsForTfmSpecificBuildOutput>
	    $(TargetsForTfmSpecificBuildOutput);
	    _MauiPackXamlDesignAssemblies
	</TargetsForTfmSpecificBuildOutput>
    </PropertyGroup>

	<Target Name="_MauiPackXamlDesignAssemblies">
		<ItemGroup>
			<BuildOutputInPackage Include="..\Xaml.Design\bin\$(Configuration)\net472\Microsoft.Maui.Controls.Xaml.DesignTools.dll">
				<TargetPath>Design\Microsoft.Maui.Controls.Xaml.DesignTools.dll</TargetPath>
			</BuildOutputInPackage>
			<BuildOutputInPackage Include="..\Xaml.Design\bin\$(Configuration)\net472\Microsoft.Maui.Controls.Xaml.DesignTools.pdb">
				<TargetPath>Design\Microsoft.Maui.Controls.Xaml.DesignTools.pdb</TargetPath>
			</BuildOutputInPackage>
		</ItemGroup>
	</Target>
</Project>
