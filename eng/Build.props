<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- Build tasks always needed first -->
  <ItemGroup Condition="'$(BuildDeviceTests)' != 'true'">
    <ProjectToBuild Include="$(RepoRoot)Microsoft.Maui.BuildTasks.slnf" />
  </ItemGroup>

  <!-- Pack only: Microsoft.Maui.Packages -->
  <ItemGroup Condition="'$(BuildDeviceTests)' != 'true' and '$(DotNetBuildRepo)' == 'true'">
    <ProjectToBuild Include="$(RepoRoot)eng/Microsoft.Maui.Packages-mac.slnf" Condition="'$(OS)' != 'Windows_NT'">
        <AdditionalProperties>ValidateXcodeVersion=false</AdditionalProperties>
    </ProjectToBuild>
    <ProjectToBuild Include="$(RepoRoot)eng/Microsoft.Maui.Packages.slnf" Condition="'$(OS)' == 'Windows_NT'" />
  </ItemGroup>

  <!-- Full build: Microsoft.Maui.sln -->
  <ItemGroup Condition="'$(BuildDeviceTests)' != 'true' and '$(DotNetBuildRepo)' != 'true'">
    <ProjectToBuild Include="$(RepoRoot)Microsoft.Maui.sln" Condition="'$(OS)' == 'Windows_NT'">
        <AdditionalProperties>ValidateXcodeVersion=false;CodesignRequireProvisioningProfile=false;EnableWindowsTargeting=true</AdditionalProperties>
    </ProjectToBuild>
    <ProjectToBuild Include="$(RepoRoot)Microsoft.Maui-mac.slnf" Condition="'$(OS)' != 'Windows_NT'">
        <AdditionalProperties>ValidateXcodeVersion=false;CodesignRequireProvisioningProfile=false;EnableWindowsTargeting=true</AdditionalProperties>
    </ProjectToBuild>
  </ItemGroup>

  <!-- Device tests -->
  <ItemGroup Condition="'$(BuildDeviceTests)' == 'true'">
    <ProjectToBuild Include="$(RepoRoot)src/Controls/tests/DeviceTests/Controls.DeviceTests.csproj" BuildInParallel="false"/>
    <ProjectToBuild Include="$(RepoRoot)src/Core/tests/DeviceTests/Core.DeviceTests.csproj" BuildInParallel="false"/>
    <ProjectToBuild Include="$(RepoRoot)src/Graphics/tests/DeviceTests/Graphics.DeviceTests.csproj" BuildInParallel="false" />
    <ProjectToBuild Include="$(RepoRoot)src/Essentials/test/DeviceTests/Essentials.DeviceTests.csproj" BuildInParallel="false">
        <AdditionalProperties>CodesignRequireProvisioningProfile=false</AdditionalProperties>
    </ProjectToBuild>
    <ProjectToBuild Include="$(RepoRoot)src/BlazorWebView/tests/DeviceTests/MauiBlazorWebView.DeviceTests.csproj" BuildInParallel="false" />
  </ItemGroup>
</Project>
