parameters:
  mauiSourcePath: $(Build.SourcesDirectory)
  buildConfig: Debug
  repoLogPath: $(Build.Arcade.LogsPath)

steps:
- template: /eng/pipelines/common/run-dotnet-preview.yml
  parameters:
    displayName: Create temporary android project
    mauiSourcePath: ${{ parameters.mauiSourcePath }}
    command: new
    arguments: android -o $(Agent.TempDirectory)/TempDroid

- powershell:  'gci env: | format-table -autosize -wrap'
  displayName:  dump environment

- template: /eng/pipelines/common/run-dotnet-preview.yml
  parameters:
    displayName: Install android dependencies
    mauiSourcePath: ${{ parameters.mauiSourcePath }}
    project: $(Agent.TempDirectory)/TempDroid/TempDroid.csproj
    arguments: '-t:InstallAndroidDependencies -p:AcceptAndroidSdkLicenses=true -bl:${{ parameters.repoLogPath }}/install-android-dependencies.binlog'
